# 正则表达式

## 正则表达式概述

### 用法

- 数据隐藏
- 数据采集
- 数据过滤
- 数据验证（手机号、邮箱地址）



# JS标准库中的正则对象

```js
var t = 'sfsvsinwaeuiwauwef';
var reg = /sin/;	//在双//中填入需要匹配的对象

alert(reg.test(t));		//浏览器弹出对话，返回bool值
```

## 创建正则对象

1. 字面量写法：

   ```js
   var regex = /zyx/;
   ```

2. 构造函数：

   ```js
   var regex = new RegExp('zyc');
   ```

## 匹配模式

表示正则匹配的附加规则，放在在正则表达式的最尾部。

修饰符可以单个使用，也可以多个一起使用。



**常见的修饰符**

- **g**（global）：**全局匹配**，匹配出所有满足条件的的结果，不加g，再第一次匹配成功后，就停止继续匹配了
- **i**（ignore）：**忽略大小写**，匹配时会忽略字符串的大小写



```js
var reg = /ha/i;

var reg2 = new RegExp('ha','i');
```



## 正则对象的方法

- **test(str)**：判断字符串中是否具有指定的字串，**返回bool类型**
- **exec(str)**：返回字符串中指定的字串，**一次只能获取一个符合匹配的结果**，**找到返回字串，找不到返回null**



## string对象方法

- search(reg)：返回指定模式字串首次出现的位置

- match(reg)：以数组方式返回指定模式的字符串

- repalce(reg,'需要替换的字符')：把指定模式的字串进行替换操作

- split(reg)：以指定模式分割字符串，返回结果为数组

  ```js
  var t = 'adoqwefqo;bcx';
  var reg = /we/;
  
  var z = t.search(reg);		//z = t以search()方法，用reg模式匹配
  console.log(z);		//打印z
  ```

  

# 几个重要概念

## 子表达式

正则表达式中，通过一对圆括号的括起的内容，我们称为“子表达式”

## 捕获

```js
var reg = /\d(\d)(\d)\d/gi;		//创建匹配对象，(\d)：子表达式

var str = 'acbke123fifds';		//字符串
```

正则表达式中，**子表达式匹配内容时**，**会将匹配的字符放入系统缓存区中**，这个过程称为捕获，每一个（/d）都代表一个缓存区

一个\d只能匹配到一个数字，并且一个缓冲区只能有一个字符

![01](正则表达images\01.png)



## 反向引用

正则表达式里，可以用\n(n>0，正整数，表示系统缓存区编号)，来获得缓冲区内容，这个就是反向引用

```js
var s = 'fkjscw22335sf2222fw43';

var reg = /(\d)\1\1\1/;		//匹配四个连续的数字，这里就用到了反向引用，反向引用第一个（\d）的内容，例如：8888
var reg2 = /(\d)\1(\d)\2/;		//匹配前面两个数字相同，后面两个数字相同，的四位数，例如：2233
var reg3 = /(\d)\1(\d)\1/;		//匹配1，2，4数字相同，3号位为任一数字 例如：2292
var z = s.match(reg);
console.log(z);
```



# 编写正则表达式

/\d{2,9}/g：匹配2到9位的数字

## 字符

| 字符  |                             含义                             |
| ----- | :----------------------------------------------------------: |
| \     |                           转义字符                           |
| ^     |                           取反字符                           |
| *     |               匹配前面的子表达式，**0或多次**                |
| +     |               匹配前面的子表达式，**1或多次**                |
| ?     |                匹配前面的子表达式，**0或1次**                |
| {n}   |                     **匹配确定的 n 次**                      |
| {n,}  |                      **至少匹配 n 次**                       |
| {n,m} | m 和 n 均为非负整数，其中n <= m **最少匹配 n 次且最多匹配 m 次** |



## 字符簇

| 字符簇      |              含义              |
| ----------- | :----------------------------: |
| [a-z]       |       匹配所有的小写字母       |
| [A-Z]       |       匹配所有的大写字母       |
| [a-zA-Z]    |         匹配所有的字母         |
| [0-9]       |         匹配所有的数字         |
| [0-9a-zA-Z] | 匹配所有的数字，匹配所有的字母 |
| [1234]      |         匹配1，2，3，4         |



## 其他字符簇

| 字符簇       |                含义                 |
| ------------ | :---------------------------------: |
| [[:alpha:]]  |              任何字母               |
| [[:digit:]]  |              任何数字               |
| [[:alnum:]]  |           任何字母和数字            |
| [[:space:]]  |            任何空白字符             |
| [[:upper:]]  |            任何大写字母             |
| [[:lower:]]  |            任何小写字母             |
| [[:punct:]]  |            任何标点符号             |
| [[:xdigit:]] | 任何16进制的数字，相当于[0-9a-fA-F] |



## ^（脱字符）：用于取反

| 字符簇 | 含义                                 |
| ------ | ------------------------------------ |
| [^a-z] | 匹配除了所有的小写字母之外的任意字符 |
| [^0-9] | 匹配除了匹配所有的数字之外的任意字符 |

## 常用的特殊匹配符

| 字符簇           |                             含义                             |
| ---------------- | :----------------------------------------------------------: |
| \b               | 匹配一个单词边界,例如， 'er\b' 可以匹配"never" 中的 'er'，但不能匹配 "verb" 中的 'er' |
| \d               |                匹配一个数字字符。等价于 [0-9]                |
| \D               |              匹配一个非数字字符。等价于`[^0-9]`              |
| \w               |       匹配包括下划线的任何单词字符。等价于[A-Za-z0-9_]       |
| \W               |          匹配任何非单词字符。等价于 `[^A-Za-z0-9_]`          |
| \n               |              匹配一个换行符。等价于 \x0a 和 \cJ              |
| \s               |         匹配任何空白字符，包括空格、制表符、换页符等         |
| \S               |         匹配任何非空白字符。等价于 `[^ \f\n\r\t\v]`          |
| .（点号）        |                匹配除 "\n" 之外的任何单个字符                |
| [\u4e00-\\u9fa5] |                       匹配任意中文字符                       |



## 或者

```js
var str = 'iphone, ipad, imac, iwatch, ie, iant';

var reg = /\bi(phone|pad|watch|mac)\b/g;	//
var z = str.match(reg);
consloe.log(z);		//["ipad", "iphone", "iwatch", "imac"]
```



## 预查

```js
//正向预查、正预测、前瞻、先行断言
var reg = /\b\w+(?=ing\b)/g;		//匹配xxxing，输出xxx

//负向预查、负预测、前瞻、先行否定
var reg = /\b\w+(?!=ing)\w{3}\b/g;		//匹配不是以ing结尾的，并输出
```


